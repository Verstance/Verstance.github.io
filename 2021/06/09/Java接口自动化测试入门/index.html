<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    
    <title>
        Java接口自动化测试入门 |
        
        Homgun&#39;s Blog
    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
        <link rel="shortcut icon" href="/images/favicon.png">
    
    
<link rel="stylesheet" href="/css/style.css">

    <script id="hexo-configurations">
    let ILS = window.ILS || {};
    let CONFIG = {"hostname":"example.com","root":"/","localsearch":{"enable":true,"trigger":"auto","unescape":false,"preload":true},"themeInfo":{"name":"ILS","version":"2.1.0","author":"XPoet","repository":"https://github.com/XPoet/hexo-theme-ils"},"toc":{"enable":true,"number":false,"expand_all":true},"back2top":{"enable":true},"path":"search.json"};
  </script>
<meta name="generator" content="Hexo 5.2.0"></head>


<body>
<div class="page-container">

    <header class="page-header">
        <div class="header-progress"></div>
    </header>

    <main class="page-main">

        <div class="page-main-content">

            <div class="page-main-content-top">
                <header class="header-wrapper">

    <div class="header-content">

        <a class="logo-title" href="/">
            Homgun&#39;s Blog
        </a>

        <ul class="menu-list">
            
                <li class="menu-item">
                    <a class=""
                       href="/"
                    >
                        首页
                    </a>
                </li>
            
                <li class="menu-item">
                    <a class=""
                       href="/archives"
                    >
                        归档
                    </a>
                </li>
            
                <li class="menu-item">
                    <a class=""
                       href="/tags"
                    >
                        标签
                    </a>
                </li>
            
        </ul>

        <div class="menu-bar">
            <div class="menu-bar-middle"></div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item">
                    <a class=""
                       href="/">首页</a>
                </li>
            
                <li class="drawer-menu-item">
                    <a class=""
                       href="/archives">归档</a>
                </li>
            
                <li class="drawer-menu-item">
                    <a class=""
                       href="/tags">标签</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


            </div>

            <div class="page-main-content-middle">

                <main class="main-content normal-code-theme">

                    
                        <div class="fade-in-down-animation">
    <div class="article-content-container">

        <div class="article-title">
            <h3><a class="title-hover-animation">Java接口自动化测试入门</a></h3>
        </div>

        <div class="meta-info">
            <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fa fa-calendar-o"></i> 2021-06-09 17:54:34
    </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fa fa-tags"></i>
            <ul>
                
                    <li>
                        <a href="/tags/Java/">Java</a>
                    </li>
                
                    <li>
                        | <a href="/tags/%E6%B5%8B%E8%AF%95/">测试</a>
                    </li>
                
                    <li>
                        | <a href="/tags/%E6%8E%A5%E5%8F%A3%E6%B5%8B%E8%AF%95/">接口测试</a>
                    </li>
                
                    <li>
                        | <a href="/tags/%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/">持续集成</a>
                    </li>
                
            </ul>
        </span>
    
    
    
        <span class="article-wordcount article-meta-item">
        <i class="fa fa-book"></i> <span>11.2k 字</span>
        </span>
    
    
</div>

        </div>

        <div class="article-content markdown-body">
            <h4 id="1-基本概念"><a href="#1-基本概念" class="headerlink" title="1 基本概念"></a>1 基本概念</h4><p><strong>涉及技术</strong></p>
<p>HttpClient：模拟客户端发送请求</p>
<p>Mock：虚拟化平台，模拟测试</p>
<p>MyBatis：持久层框架</p>
<p>TestNG：集成测试的框架</p>
<p>Jenkins：持续集成工具</p>
<p>SpringBoot：开发框架，接口开发</p>
<p>Git：项目代码版本管理工具</p>
<p><img src="http://typora-imagehosting.oss-cn-shanghai.aliyuncs.com/img/6094e79f0001cca412800720-500-284.jpg" alt="img"></p>
<p>为什么要做接口测试：</p>
<ol>
<li>接口测试更容易实现自动化<strong>持续集成</strong>；</li>
<li>相对于UI测试更加<strong>稳定</strong>；</li>
<li>更容易<strong>定位bug</strong>，提高测试<strong>效率</strong>，减少回归测试的人力与时间<strong>成本</strong> 。</li>
</ol>
<p><strong>测试流程</strong></p>
<p>需求阶段→研发阶段→测试阶段→项目上线</p>
<p><img src="http://typora-imagehosting.oss-cn-shanghai.aliyuncs.com/img/6094ef3b0001352119201080-500-284.jpg" alt="img"></p>
<p>项目上线后-添加监控：</p>
<p>接口存活监控：<br>1、端口号是否活着；<br>2、即便端口活着，监控程序（程序假死），隔10s，检测接口，是否正确返回。</p>
<p>测试报告（展现工作价值）：经过几轮测试，耗费多少时间，执行了哪些测试（功能、性能、自动化），发现哪些问题；</p>
<p><strong>接口测试范围</strong></p>
<p>1.功能测试：等价类划分法、边解值分析法、错误推论法、因果推论法、判定表驱动法、正交试验发、功能图发、场景法</p>
<p>2.异常测试：<br>2.1数据异常：null，””，数据类型异常<br>2.2环境异常： a.负载均衡架构，b冷热备份:一般是热备份</p>
<p>3.性能测试（狭义）：负载测试、压力测试或强度测试、并发测试、稳定性测试或可靠性测试</p>
<p><strong>接口用例设计原则</strong></p>
<p>用例设计能映射成一张表，能更好的加载。 建议将表头的字段写成英文的，方便映射到代码，以便以后做自动化测试的时候进行读取 </p>
<p>接口测试用例的设计：（以登录为例）</p>
<p>1，id ：如1,2,3 </p>
<p>2，目标url：如<a target="_blank" rel="noopener" href="http://www.imooc.com/login/">http://www.imooc.com/login/</a> </p>
<p>3，username </p>
<p>4，pwd </p>
<p>5，程序状态码（类似预期结果）：如1表示成功 </p>
<p>6，返回内容：如success </p>
<p>7，实际结果：xxx </p>
<p>8，执行状态：如1成功，2失败</p>
<p><img src="http://typora-imagehosting.oss-cn-shanghai.aliyuncs.com/img/5accd27f0001d55f19201080.jpg" alt="img"></p>
<p><strong>环境异常测试</strong></p>
<p>现在nginx下有三个tomcat,分配tomact的原则是根据userid来区分，当余数为0，分发到1上，以此类推，现在如果用户1把tomcat2弄挂了，此时用户4来访问，正常情况下是要访问到tomcat3。后续tomact重启好了，用户7应该可以正常访问tomcat2而不是3 </p>
<p>方法：通过日志来确认</p>
<p><img src="http://typora-imagehosting.oss-cn-shanghai.aliyuncs.com/img/5ec29b5d00019ede19201080.jpg" alt="img"></p>
<p><strong>自动化框架</strong></p>
<p>显示层：结合TestNG，使用ExtentReport生成测试报告</p>
<p>控制层：采用httpclient框架进行自动化case的编写，进行逻辑验证，并结合TestNg和mybatis验证预期结果和实际结果是否一致</p>
<p>持久层：测试用例存储，结合mybatis操作数据库（数据驱动）</p>
<h4 id="2-Git"><a href="#2-Git" class="headerlink" title="2 Git"></a>2 Git</h4><h5 id="2-1-安装及配置"><a href="#2-1-安装及配置" class="headerlink" title="2.1 安装及配置"></a>2.1 安装及配置</h5><p><strong>安装</strong>Git客户端</p>
<ul>
<li><p>linux：yum install -y git </p>
</li>
<li><p>windows：<a target="_blank" rel="noopener" href="https://git-scm.com/downloads">https://git-scm.com/downloads</a> </p>
</li>
<li><p>mac：brew install git </p>
</li>
</ul>
<p>检查安装是否成功： git –version</p>
<p><strong>配置</strong>sshkey（每次提代码都不要输入用户名和密码）</p>
<ol>
<li>生成key：ssh-keygen -t rsa -C “邮箱地址”（建议重命名生成公钥和私钥,防止配置多个ssh出现重名覆盖的问题）</li>
<li>cd ~/.ssh （用户目录下的.ssh文件夹）</li>
<li>复制id_rsa.pub的公钥内容到github （github→settings→SSH and GPG keys→new SSH key）</li>
</ol>
<p>配置多个sshkey </p>
<ol>
<li><p>cd ~/.ssh(用户目录下的.ssh文件夹） </p>
</li>
<li><p>vim config </p>
</li>
<li><p>添加Host/HostName/[User/PreferredAuthentications]/IdentityFile </p>
<p>~/.ssh/config</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># gitee</span><br><span class="line">Host gitee.com</span><br><span class="line">HostName gitee.com</span><br><span class="line">PreferredAuthentications publickey</span><br><span class="line">IdentityFile ~&#x2F;.ssh&#x2F;gitee_id_rsa</span><br><span class="line"># github</span><br><span class="line">Host github.com</span><br><span class="line">HostName github.com</span><br><span class="line">PreferredAuthentications publickey</span><br><span class="line">IdentityFile ~&#x2F;.ssh&#x2F;id_rsa</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h5 id="2-2-基本操作"><a href="#2-2-基本操作" class="headerlink" title="2.2 基本操作"></a>2.2 基本操作</h5><p><img src="http://typora-imagehosting.oss-cn-shanghai.aliyuncs.com/img/bg2015120901.png" alt="img"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#配置账号和邮箱</span></span><br><span class="line">git config --global user.name “your_username” <span class="comment">#设置用户名</span></span><br><span class="line">git config --global user.email “your_registered_Email” <span class="comment">#设置邮箱地址</span></span><br><span class="line"><span class="comment">#新建本地仓库 </span></span><br><span class="line"><span class="comment">#git init</span></span><br><span class="line"><span class="comment">#在Github上新建一个仓库，复制仓库地址</span></span><br><span class="line"><span class="comment">#git remote add origin 地址</span></span><br><span class="line"><span class="comment">#git push -u origin master</span></span><br><span class="line"><span class="comment">#克隆GitHub项目创库代码</span></span><br><span class="line">git <span class="built_in">clone</span> 地址</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看仓库里本地文件的状态</span></span><br><span class="line">git status</span><br><span class="line"><span class="comment">#将文件添加到暂存区，追踪文件</span></span><br><span class="line">git add 文件名 <span class="comment">#git add -A或 . 把目录下的所有文件添加到暂存区，多个文件用空格隔开</span></span><br><span class="line"><span class="comment">#将文件提交到本地仓库</span></span><br><span class="line">git commit -m  <span class="string">&quot;备注信息&quot;</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">#本地仓库↔远程仓库</span></span><br><span class="line"><span class="comment">#将本地仓库的文件推送到远程仓库</span></span><br><span class="line">git push</span><br><span class="line"><span class="comment">#将远程仓库的文件拉取到本地仓库</span></span><br><span class="line">git pull </span><br></pre></td></tr></table></figure>

<h5 id="2-3-分支操作"><a href="#2-3-分支操作" class="headerlink" title="2.3 分支操作"></a>2.3 分支操作</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看分支</span></span><br><span class="line">git branch <span class="comment">#查看本地分支 </span></span><br><span class="line">git branch -a <span class="comment">#查看本地以及远程分支 </span></span><br><span class="line"></span><br><span class="line"><span class="comment">#创建/切换（本地）分支</span></span><br><span class="line">git checkout -b <span class="comment">#分支名 在本地创建分支，并切换到该分支 </span></span><br><span class="line">git checkout 分支名 <span class="comment">#切换分支 </span></span><br><span class="line">git push --set-upstream origin branch1 <span class="comment">#将分支推送到远程</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#删除本地分支</span></span><br><span class="line">git branch -d 分支名 <span class="comment">#不能在要删除的分支内删除本地分支，应该切换到其他分支再进行删除</span></span><br><span class="line"><span class="comment">#删除远程分支</span></span><br><span class="line">git branch -r -d origin/分支名 </span><br><span class="line">git push origin :分支名</span><br><span class="line"></span><br><span class="line"><span class="comment">#合并（本地）分支</span></span><br><span class="line">git merge 分支名</span><br><span class="line">git push <span class="comment">#推送到远程仓库</span></span><br></pre></td></tr></table></figure>

<p>当合并冲突时，会提示 “ &lt;&lt;&lt;&lt;&lt;&lt; HEAD 冲突内容 &gt;&gt;&gt;&gt;&gt;&gt;分支名 ”，可以按照该提示修改文件，然后重新推送即可。</p>
<p><img src="http://typora-imagehosting.oss-cn-shanghai.aliyuncs.com/img/5ad03fe80001baa612800720.jpg" alt="img"></p>
<h4 id="3-TestNG"><a href="#3-TestNG" class="headerlink" title="3 TestNG"></a>3 TestNG</h4><blockquote>
<p>TestNG是Java中的一个测试框架，是一个目前很流行实用的单元测试框架，有完善的用例管理模块，配合Maven能够很方便管理依赖第三方插件。使用TestNG可以做功能、接口、单元、集成的自动化测试，最常见的是结合selenium做功能自动化测试，它使用Java注释去写测试方法。</p>
</blockquote>
<p>测试人员一般用TestNG来写自动化测试，开发人员一般用Junit写单元测试，TestNG适合测试人员使用的原因：</p>
<ul>
<li>比Junit涵盖<strong>功能更全面</strong>的测试框架；</li>
<li>Junit更适合隔离性比较强的单元测试；</li>
<li>TestNG更适合<strong>复杂的集成测试</strong>。</li>
</ul>
<p>编写一个测试的过程包含以下步骤：</p>
<ul>
<li>编写测试的<strong>业务逻辑</strong>并在代码中插入<strong>TestNG annotation</strong>；</li>
<li>将测试信息添加到<strong>testng.xml</strong>文件或build.xml中；</li>
<li>运行TestNG。</li>
</ul>
<p><strong>Maven依赖</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.testng<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>testng<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>6.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="3-1-常用注解"><a href="#3-1-常用注解" class="headerlink" title="3.1 常用注解"></a>3.1 常用注解</h5><p><code>@BeforeSuite</code> 在<strong>该套件</strong>的所有测试都运行在注释的方法之前，<strong>仅运行一次</strong>。应用场景：suite可以包含多个class，类应该属于某个测试套件之下。</p>
<p><code>@BeforeClass</code> 在调用<strong>当前类</strong>的第一个测试方法之前运行，注释方法仅<strong>运行一次</strong>。应用场景：类运行前注册对象，静态方法，变量赋值等。</p>
<p><code>@BeforeTest</code> 注释的方法将在属于**<code>&lt;test&gt;</code>标签内<strong>的类的</strong>所有测试方法**运行之前运行。</p>
<p>​    <code>@Test</code> 将类或方法标记为测试的一部分。</p>
<p>​    <code>@BeforeMethod</code> 注释方法将在<strong>每个测试方法</strong>之前运行。 </p>
<p>​    <code>    @AfterMethod</code> 注释方法将在每个测试方法之后运行。</p>
<p><code>@AfterTest</code> 注释的方法将在属于<code>&lt;test&gt;</code>标签内的类的所有测试方法运行之后运行。</p>
<p><code>@AfterClass</code> 在调用当前类的第一个测试方法之后运行，注释方法仅运行一次。</p>
<p><code>@AfterSuite</code> 在该套件的所有测试都运行在注释方法之后，仅运行一次。</p>
<p><img src="http://typora-imagehosting.oss-cn-shanghai.aliyuncs.com/img/609cf41d0001900319201080-500-284.jpg" alt="img"></p>
<p><strong>监听器</strong></p>
<p> <code>@Listeners</code> 定义测试类上的监听器。  </p>
<p>TestNG 的监听器能够定制额外的功能以满足我们的需要，尤其是关于测试方法运行的行为、报表以及通知功能。</p>
<p>TestNG 提供的几种监听器：</p>
<ul>
<li>IAnnotationTransformer</li>
<li>IAnnotationTransformer2</li>
<li>IHookable</li>
<li>IInvokedMethodListener</li>
<li>IMethodInterceptor</li>
<li>IReporter</li>
<li>ISuiteListener</li>
<li>ITestListener</li>
</ul>
<p>尽管名字叫监听器，但事实上它们只是一些<strong>预定义的 Java 接口</strong>。用户创建这些接口的实现类，并把它们加入到 TestNG 中，TestNG 便会在测试运行的<strong>不同时刻调用</strong>这些类中的接口方法。</p>
<h6 id="Test"><a href="#Test" class="headerlink" title="@Test"></a>@Test</h6><p><strong>忽略测试</strong>：@Test(enabled = false)</p>
<p><strong>分组测试</strong>（方法 / 类）</p>
<p>创建方法： @Test(groups=“group1”) @Test(groups=“group2”) …</p>
<p><code>@BeforeGroups</code> 配置方法将在组列表之前运行。 此方法保证在调用属于这些组中的任何一个的第一个测试方法之前不久运行。  </p>
<p><code>@AfterGroups</code> 此配置方法将在组列表之后运行。该方法保证在调用属于任何这些组的最后一个测试方法之后不久运行。  </p>
<p>xml配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">suite</span> <span class="attr">name</span>=<span class="string">&quot;grouponclass&quot;</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">test</span> <span class="attr">name</span>=<span class="string">&quot;testgroup&quot;</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;<span class="name">groups</span>&gt;</span> </span><br><span class="line">            <span class="tag">&lt;<span class="name">run</span>&gt;</span> </span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span> <span class="attr">name</span>=<span class="string">&quot;stu&quot;</span>/&gt;</span> </span><br><span class="line">            <span class="tag">&lt;/<span class="name">run</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;/<span class="name">groups</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">classes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">&quot;com...&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">classes</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">test</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">suite</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>异常测试</strong>：期望结果为一个异常的测试</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test(expectedExceptions = RuntimeException.class)</span> <span class="comment">//期望得到的结果是异常</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">runTimeExcpeiontSuccess</span><span class="params">()</span></span>&#123;</span><br><span class="line">	System.out.println(<span class="string">&quot;这是一个异常成功的测试&quot;</span>);</span><br><span class="line">	<span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException();<span class="comment">//抛出一个异常</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>依赖测试</strong></p>
<p>例如：test2方法依赖test1方法 （先执行test1）</p>
<p>应用标签：@Test（dependsOnMethods={“test1”}） </p>
<p>如果test1执行失败了，则test2方法则被忽略。</p>
<p><img src="http://typora-imagehosting.oss-cn-shanghai.aliyuncs.com/img/5b6056450001d1ba19201080.jpg" alt="img"></p>
<p><strong>参数化测试</strong></p>
<p><code>@Parameters</code> 描述如何将参数传递给<code>@Test</code>方法。  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span> </span><br><span class="line"><span class="meta">@Parameters(&#123;&quot;a&quot;,&quot;b&quot;&#125;)</span> </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">paramtertest1</span><span class="params">(String name,<span class="keyword">int</span> age)</span></span></span><br><span class="line"><span class="function"></span>&#123; System.out.println(<span class="string">&quot;name=&quot;</span>+name +<span class="string">&quot; age=&quot;</span>+age);&#125; </span><br></pre></td></tr></table></figure>

<p>xml中相关配置 </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">test</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">parameter</span> <span class="attr">name</span>=<span class="string">&quot;a&quot;</span> <span class="attr">value</span>=<span class="string">&quot;123&quot;</span>/&gt;</span> <span class="comment">&lt;!--其中name的值与@Parameters中的名字对应--&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">parameter</span> <span class="attr">name</span>=<span class="string">&quot;b&quot;</span> <span class="attr">value</span>=<span class="string">&quot;3&quot;</span>/&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">classes</span>&gt;</span> ... <span class="tag">&lt;/<span class="name">classes</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">test</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p> <code>@Factory</code> 将一个方法标记为工厂，返回<code>TestNG</code>将被用作测试类的对象。 该方法必须返回<code>Object []</code>。</p>
<p> <code>@DataProvider</code> 标记一种方法来提供测试方法的数据。 注释方法必须返回一个<code>Object [] []</code>，其中每个<code>Object []</code>可以被分配给测试方法的参数列表。 要从该<code>DataProvider</code>接收数据的<code>@Test</code>方法需要使用与此注释名称相等的<code>dataProvider</code>名称。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test(dataProvider = &quot;data&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDataProvider</span><span class="params">(String name,<span class="keyword">int</span> age)</span></span></span><br><span class="line"><span class="function"></span>&#123; System.out.println(<span class="string">&quot;name=&quot;</span> +name+<span class="string">&quot; ;age=&quot;</span>+age); &#125; </span><br><span class="line"></span><br><span class="line"><span class="meta">@DataProvider(name = &quot;data&quot;)</span> </span><br><span class="line"><span class="keyword">public</span> Object[][] dataProvider()</span><br><span class="line">&#123; Object[][] objects=<span class="keyword">new</span> Object[][]&#123;&#123;<span class="string">&quot;zhangsan&quot;</span>,<span class="number">10</span>&#125;,&#123;<span class="string">&quot;lisi&quot;</span>,<span class="number">20</span>&#125; &#125;;<span class="keyword">return</span> objects;&#125;</span><br></pre></td></tr></table></figure>

<p>Data根据不同的方法，传递不同的值</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@DataProvider(name = &quot;dataProviderWithDiffMethod&quot;)</span> </span><br><span class="line"><span class="keyword">public</span> Object[][] dataProvider(Method method)</span><br><span class="line">&#123; Object[][] o=<span class="keyword">null</span>; </span><br><span class="line"><span class="keyword">if</span> (method.getName().equals(<span class="string">&quot;test2&quot;</span>))</span><br><span class="line">&#123; o=<span class="keyword">new</span> Object[][]&#123; &#123;<span class="string">&quot;test2&quot;</span>,<span class="number">10</span>&#125; &#125;; &#125; </span><br><span class="line"> <span class="keyword">else</span> &#123; o=<span class="keyword">new</span> Object[][]&#123; &#123;<span class="string">&quot;test3&quot;</span>,<span class="number">20</span>&#125; &#125;;&#125; </span><br><span class="line"> <span class="keyword">return</span> o;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>多线程测试</strong></p>
<p>注解实现</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//10个线程 </span></span><br><span class="line"><span class="comment">//@Test(invocationCount = 10) threadPoolSize是线程池数量，用于各不关联的用例，提高效率 </span></span><br><span class="line"><span class="meta">@Test(invocationCount = 10,threadPoolSize =5 )</span> </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">thread</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    System.out.println(<span class="number">1</span>); </span><br><span class="line">    System.out.printf(<span class="string">&quot;Thread ID:%s%n&quot;</span>,Thread.currentThread().getId());<span class="comment">//把当前的线程id打印出来 </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>xml配置实现</p>
<p>parallel=tests,methods, classes,instances（并发级别）</p>
<p><img src="http://typora-imagehosting.oss-cn-shanghai.aliyuncs.com/img/5ad8bc2c0001273519201080.jpg" alt="img"></p>
<p><strong>超时测试</strong></p>
<p>适用于等一段时间就不想等，直接跳到下一个case的情况。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TimeOutTest</span> </span>&#123; </span><br><span class="line">    <span class="comment">// 期望在3s得到结果，结果2s就成功了，所以测试结果是通过 </span></span><br><span class="line">    <span class="meta">@Test(timeOut = 3000)</span> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSuccess</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span></span><br><span class="line"><span class="function">    </span>&#123; Thread.sleep(<span class="number">2000</span>); &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3-2-测试报告"><a href="#3-2-测试报告" class="headerlink" title="3.2 测试报告"></a>3.2 测试报告</h5><p>ExtentReport</p>
<p>Maven依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.vimalselvam<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>testng-extentsreport<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.relevantcodes<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>extentreports<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.41.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.aventstack<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>extentreports<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>基本配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">suite</span> <span class="attr">name</span>=<span class="string">&quot;testng reprot&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">test</span> <span class="attr">name</span>=<span class="string">&quot;testng&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">classes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">class</span> <span class="attr">name</span>=<span class="string">&quot;com.imooc.extent.AssertDemo&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">methods</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span> <span class="attr">name</span>=<span class="string">&quot;test1&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span> <span class="attr">name</span>=<span class="string">&quot;test2&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span> <span class="attr">name</span>=<span class="string">&quot;test3&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">include</span> <span class="attr">name</span>=<span class="string">&quot;log&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">methods</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">classes</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">test</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listeners</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">listener</span> <span class="attr">class-name</span>=<span class="string">&quot;com.vimalselvam.testng.listener.ExtentTestNgFormatter&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">listeners</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">suite</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>自定义监听类ExtentTestNGIReporterListener</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.aventstack.extentreports.ExtentReports;</span><br><span class="line"><span class="keyword">import</span> com.aventstack.extentreports.ExtentTest;</span><br><span class="line"><span class="keyword">import</span> com.aventstack.extentreports.ResourceCDN;</span><br><span class="line"><span class="keyword">import</span> com.aventstack.extentreports.Status;</span><br><span class="line"><span class="keyword">import</span> com.aventstack.extentreports.model.TestAttribute;</span><br><span class="line"><span class="keyword">import</span> com.aventstack.extentreports.reporter.ExtentHtmlReporter;</span><br><span class="line"><span class="keyword">import</span> com.aventstack.extentreports.reporter.configuration.ChartLocation;</span><br><span class="line"><span class="keyword">import</span> com.aventstack.extentreports.reporter.configuration.Theme;</span><br><span class="line"><span class="keyword">import</span> org.testng.*;</span><br><span class="line"><span class="keyword">import</span> org.testng.xml.XmlSuite;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExtentTestNGIReporterListener</span> <span class="keyword">implements</span> <span class="title">IReporter</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> Date date = <span class="keyword">new</span> Date();</span><br><span class="line">    <span class="keyword">static</span> String form = String.format(<span class="string">&quot;%tF&quot;</span>, date);</span><br><span class="line">    <span class="keyword">static</span> String hour = String.format(<span class="string">&quot;%tH&quot;</span>, date);</span><br><span class="line">    <span class="keyword">static</span> String minute = String.format(<span class="string">&quot;%tM&quot;</span>, date);</span><br><span class="line">    <span class="keyword">static</span> String second = String.format(<span class="string">&quot;%tS&quot;</span>, date);</span><br><span class="line">    <span class="comment">//生成的路径以及文件名</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String OUTPUT_FOLDER = <span class="string">&quot;test-output/&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String FILE_NAME = <span class="string">&quot;index&quot;</span>+form+hour+minute+second+<span class="string">&quot;.html&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> ExtentReports extent;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">generateReport</span><span class="params">(List&lt;XmlSuite&gt; xmlSuites, List&lt;ISuite&gt; suites, String outputDirectory)</span> </span>&#123;</span><br><span class="line">        init();</span><br><span class="line">        <span class="keyword">boolean</span> createSuiteNode = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">if</span>(suites.size()&gt;<span class="number">1</span>)&#123;</span><br><span class="line">            createSuiteNode=<span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (ISuite suite : suites) &#123;</span><br><span class="line">            Map&lt;String, ISuiteResult&gt; result = suite.getResults();</span><br><span class="line">            <span class="comment">//如果suite里面没有任何用例，直接跳过，不在报告里生成</span></span><br><span class="line">            <span class="keyword">if</span>(result.size()==<span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//统计suite下的成功、失败、跳过的总用例数</span></span><br><span class="line">            <span class="keyword">int</span> suiteFailSize=<span class="number">0</span>;</span><br><span class="line">            <span class="keyword">int</span> suitePassSize=<span class="number">0</span>;</span><br><span class="line">            <span class="keyword">int</span> suiteSkipSize=<span class="number">0</span>;</span><br><span class="line">            ExtentTest suiteTest=<span class="keyword">null</span>;</span><br><span class="line">            <span class="comment">//存在多个suite的情况下，在报告中将同一个suite的测试结果归为一类，创建一级节点。</span></span><br><span class="line">            <span class="keyword">if</span>(createSuiteNode)&#123;</span><br><span class="line">                suiteTest = extent.createTest(suite.getName()).assignCategory(suite.getName());</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">boolean</span> createSuiteResultNode = <span class="keyword">false</span>;</span><br><span class="line">            <span class="keyword">if</span>(result.size()&gt;<span class="number">1</span>)&#123;</span><br><span class="line">                createSuiteResultNode=<span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span> (ISuiteResult r : result.values()) &#123;</span><br><span class="line">                ExtentTest resultNode;</span><br><span class="line">                ITestContext context = r.getTestContext();</span><br><span class="line">                <span class="keyword">if</span>(createSuiteResultNode)&#123;</span><br><span class="line">                    <span class="comment">//没有创建suite的情况下，将在SuiteResult的创建为一级节点，否则创建为suite的一个子节点。</span></span><br><span class="line">                    <span class="keyword">if</span>( <span class="keyword">null</span> == suiteTest)&#123;</span><br><span class="line">                        resultNode = extent.createTest(r.getTestContext().getName());</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        resultNode = suiteTest.createNode(r.getTestContext().getName());</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    resultNode = suiteTest;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(resultNode != <span class="keyword">null</span>)&#123;</span><br><span class="line">                    resultNode.getModel().setName(suite.getName()+<span class="string">&quot; : &quot;</span>+r.getTestContext().getName());</span><br><span class="line">                    <span class="keyword">if</span>(resultNode.getModel().hasCategory())&#123;</span><br><span class="line">                        resultNode.assignCategory(r.getTestContext().getName());</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        resultNode.assignCategory(suite.getName(),r.getTestContext().getName());</span><br><span class="line">                    &#125;</span><br><span class="line">                    resultNode.getModel().setStartTime(r.getTestContext().getStartDate());</span><br><span class="line">                    resultNode.getModel().setEndTime(r.getTestContext().getEndDate());</span><br><span class="line">                    <span class="comment">//统计SuiteResult下的数据</span></span><br><span class="line">                    <span class="keyword">int</span> passSize = r.getTestContext().getPassedTests().size();</span><br><span class="line">                    <span class="keyword">int</span> failSize = r.getTestContext().getFailedTests().size();</span><br><span class="line">                    <span class="keyword">int</span> skipSize = r.getTestContext().getSkippedTests().size();</span><br><span class="line">                    suitePassSize += passSize;</span><br><span class="line">                    suiteFailSize += failSize;</span><br><span class="line">                    suiteSkipSize += skipSize;</span><br><span class="line">                    <span class="keyword">if</span>(failSize&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                        resultNode.getModel().setStatus(Status.FAIL);</span><br><span class="line">                    &#125;</span><br><span class="line">                    resultNode.getModel().setDescription(String.format(<span class="string">&quot;Pass: %s ; Fail: %s ; Skip: %s ;&quot;</span>,passSize,failSize,skipSize));</span><br><span class="line">                &#125;</span><br><span class="line">                buildTestNodes(resultNode,context.getFailedTests(), Status.FAIL);</span><br><span class="line">                buildTestNodes(resultNode,context.getSkippedTests(), Status.SKIP);</span><br><span class="line">                buildTestNodes(resultNode,context.getPassedTests(), Status.PASS);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(suiteTest!= <span class="keyword">null</span>)&#123;</span><br><span class="line">                suiteTest.getModel().setDescription(String.format(<span class="string">&quot;Pass: %s ; Fail: %s ; Skip: %s ;&quot;</span>,suitePassSize,suiteFailSize,suiteSkipSize));</span><br><span class="line">                <span class="keyword">if</span>(suiteFailSize&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                    suiteTest.getModel().setStatus(Status.FAIL);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"> </span><br><span class="line">        &#125;</span><br><span class="line">        extent.flush();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//文件夹不存在的话进行创建</span></span><br><span class="line">        File reportDir= <span class="keyword">new</span> File(OUTPUT_FOLDER);</span><br><span class="line">        <span class="keyword">if</span>(!reportDir.exists()&amp;&amp; !reportDir .isDirectory())&#123;</span><br><span class="line">            reportDir.mkdir();</span><br><span class="line">        &#125;</span><br><span class="line">        ExtentHtmlReporter htmlReporter = <span class="keyword">new</span> ExtentHtmlReporter(OUTPUT_FOLDER + FILE_NAME);</span><br><span class="line">        <span class="comment">//设置静态文件的DNS</span></span><br><span class="line">        <span class="comment">//解决cdn.rawgit.com访问不了的情况</span></span><br><span class="line">        htmlReporter.config().setResourceCDN(ResourceCDN.EXTENTREPORTS);</span><br><span class="line">        htmlReporter.config().setDocumentTitle(<span class="string">&quot;自动化测试报告&quot;</span>);</span><br><span class="line">        htmlReporter.config().setReportName(<span class="string">&quot;自动化测试报告&quot;</span>);  </span><br><span class="line">        htmlReporter.config().setChartVisibilityOnOpen(<span class="keyword">true</span>);</span><br><span class="line">        htmlReporter.config().setTestViewChartLocation(ChartLocation.TOP);</span><br><span class="line">        htmlReporter.config().setTheme(Theme.STANDARD);</span><br><span class="line">        htmlReporter.config().setCSS(<span class="string">&quot;.node.level-1  ul&#123; display:none;&#125; .node.level-1.active ul&#123;display:block;&#125;&quot;</span>);</span><br><span class="line">        extent = <span class="keyword">new</span> ExtentReports();</span><br><span class="line">        extent.attachReporter(htmlReporter);</span><br><span class="line">        extent.setReportUsesManualConfiguration(<span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">buildTestNodes</span><span class="params">(ExtentTest extenttest, IResultMap tests, Status status)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//存在父节点时，获取父节点的标签</span></span><br><span class="line">        String[] categories=<span class="keyword">new</span> String[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">if</span>(extenttest != <span class="keyword">null</span> )&#123;</span><br><span class="line">            List&lt;TestAttribute&gt; categoryList = extenttest.getModel().getCategoryContext().getAll();</span><br><span class="line">            categories = <span class="keyword">new</span> String[categoryList.size()];</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> index=<span class="number">0</span>;index&lt;categoryList.size();index++)&#123;</span><br><span class="line">                categories[index] = categoryList.get(index).getName();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        ExtentTest test;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">if</span> (tests.size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">//调整用例排序，按时间排序</span></span><br><span class="line">            Set&lt;ITestResult&gt; treeSet = <span class="keyword">new</span> TreeSet&lt;ITestResult&gt;(<span class="keyword">new</span> Comparator&lt;ITestResult&gt;() &#123;</span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(ITestResult o1, ITestResult o2)</span> </span>&#123;</span><br><span class="line">                    <span class="keyword">return</span> o1.getStartMillis()&lt;o2.getStartMillis()?-<span class="number">1</span>:<span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            treeSet.addAll(tests.getAllResults());</span><br><span class="line">            <span class="keyword">for</span> (ITestResult result : treeSet) &#123;</span><br><span class="line">                Object[] parameters = result.getParameters();</span><br><span class="line">                String name=<span class="string">&quot;&quot;</span>;</span><br><span class="line">                <span class="comment">//如果有参数，则使用参数的toString组合代替报告中的name</span></span><br><span class="line">                <span class="keyword">for</span>(Object param:parameters)&#123;</span><br><span class="line">                    name+=param.toString();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(name.length()&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(name.length()&gt;<span class="number">50</span>)&#123;</span><br><span class="line">                        name= name.substring(<span class="number">0</span>,<span class="number">49</span>)+<span class="string">&quot;...&quot;</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    name = result.getMethod().getMethodName();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(extenttest==<span class="keyword">null</span>)&#123;</span><br><span class="line">                    test = extent.createTest(name);</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="comment">//作为子节点进行创建时，设置同父节点的标签一致，便于报告检索。</span></span><br><span class="line">                    test = extenttest.createNode(name).assignCategory(categories);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">for</span> (String group : result.getMethod().getGroups())</span><br><span class="line">                    test.assignCategory(group);</span><br><span class="line"> </span><br><span class="line">                List&lt;String&gt; outputList = Reporter.getOutput(result);</span><br><span class="line">                <span class="keyword">for</span>(String output:outputList)&#123;</span><br><span class="line">                    <span class="comment">//将用例的log输出报告中</span></span><br><span class="line">                    test.debug(output);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (result.getThrowable() != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    test.log(status, result.getThrowable());</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">                    test.log(status, <span class="string">&quot;Test &quot;</span> + status.toString().toLowerCase() + <span class="string">&quot;ed&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line"> </span><br><span class="line">                test.getModel().setStartTime(getTime(result.getStartMillis()));</span><br><span class="line">                test.getModel().setEndTime(getTime(result.getEndMillis()));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">private</span> Date <span class="title">getTime</span><span class="params">(<span class="keyword">long</span> millis)</span> </span>&#123;</span><br><span class="line">        Calendar calendar = Calendar.getInstance();</span><br><span class="line">        calendar.setTimeInMillis(millis);</span><br><span class="line">        <span class="keyword">return</span> calendar.getTime();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-Mock"><a href="#4-Mock" class="headerlink" title="4 Mock"></a>4 Mock</h4><p><strong>基本功能</strong>：可以模拟https，http协议，运用get/post等方法模拟请求，还可以供前端开发使用。比如前端写完代码后，后端的接口没写好，这个时候就能用mock功能了，这个也是个重要产出。</p>
<p>使用场景：把测试代码写完，正需要调试，但是开发还未提测，就可以mock进行调试</p>
<p>moco框架jar包下载地址：<a target="_blank" rel="noopener" href="https://repo1.maven.org/maven2/com/github/dreamhead/moco-runner/0.11.0/moco-runner-0.11.0-standalone.jar">https://repo1.maven.org/maven2/com/github/dreamhead/moco-runner/0.11.0/moco-runner-0.11.0-standalone.jar</a></p>
<p><strong>基本使用</strong></p>
<ol>
<li><p>命令行中启动moco命令：java -jar ./moco-runner-0.11.0-standalone.jar http -p 端口号 -c json配置文件</p>
</li>
<li><p>json配置文件</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;description&quot;</span>:<span class="string">&quot;这是我们的第一个mock例子&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;request&quot;</span>:&#123;</span><br><span class="line">      <span class="attr">&quot;uri&quot;</span>:<span class="string">&quot;/demo&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;method&quot;</span>:<span class="string">&quot;get&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;queries&quot;</span>:&#123;</span><br><span class="line">        <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;zhg&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;age&quot;</span>:<span class="string">&quot;18&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;response&quot;</span>:&#123;</span><br><span class="line">      <span class="attr">&quot;headers&quot;</span>:&#123;</span><br><span class="line">        <span class="attr">&quot;Content-Type&quot;</span>:<span class="string">&quot;text/html;charset=gbk&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">&quot;text&quot;</span>:<span class="string">&quot;第一个moco框架demo&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
</li>
<li><p>访问URL地址：<code>localhost:端口号/demo</code></p>
</li>
</ol>
<p>post请求无法直接通过浏览器打开，需要用到接口测试工具，如Jmeter。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">&quot;description&quot;</span>:<span class="string">&quot;模拟一个带参数的post请求&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;request&quot;</span>:&#123;</span><br><span class="line">            <span class="attr">&quot;uri&quot;</span>:<span class="string">&quot;/postwithparam&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;method&quot;</span>:<span class="string">&quot;post&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;forms&quot;</span>:&#123;</span><br><span class="line">                <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;zhg&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;age&quot;</span>:<span class="string">&quot;18&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">    	&#125;,</span><br><span class="line">        <span class="attr">&quot;response&quot;</span>:&#123;</span><br><span class="line">        	<span class="attr">&quot;text&quot;</span>:<span class="string">&quot;我是一个带参的post请求啦&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>在get请求中添加参数：queries<br>在post请求中添加参数：forms</p>
<p><strong>带Cookie信息的请求</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">&quot;description&quot;</span>:<span class="string">&quot;这是一个带cookies的get请求&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;request&quot;</span>:&#123;</span><br><span class="line">            <span class="attr">&quot;uri&quot;</span>:<span class="string">&quot;/get/with/cookies&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;method&quot;</span>:<span class="string">&quot;get&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;cookies&quot;</span>:&#123;</span><br><span class="line">                <span class="attr">&quot;Login&quot;</span>:<span class="string">&quot;true&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;response&quot;</span>:&#123;</span><br><span class="line">            <span class="attr">&quot;text&quot;</span>:<span class="string">&quot;我是一个带cookies的get请求&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">&quot;description&quot;</span>:<span class="string">&quot;这是一个带cookies的post请求&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;request&quot;</span>:&#123;</span><br><span class="line">            <span class="attr">&quot;uri&quot;</span>:<span class="string">&quot;/post/with/cookies&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;method&quot;</span>:<span class="string">&quot;post&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;cookies&quot;</span>:&#123;</span><br><span class="line">                <span class="attr">&quot;login&quot;</span>:<span class="string">&quot;true&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">&quot;json&quot;</span>:&#123;</span><br><span class="line">                <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;zhg&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;age&quot;</span>:<span class="string">&quot;18&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">		&#125;,</span><br><span class="line">        <span class="attr">&quot;response&quot;</span>:&#123;</span><br><span class="line">            <span class="attr">&quot;status&quot;</span>:<span class="string">&quot;200&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;json&quot;</span>:&#123;</span><br><span class="line">            	<span class="attr">&quot;name&quot;</span>:<span class="string">&quot;zhg&quot;</span>,</span><br><span class="line">            	<span class="attr">&quot;status&quot;</span>:<span class="string">&quot;1&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>Jmeter访问带cookies的请求：线程组→配置元件→http cookie 管理器。</p>
<p><img src="http://typora-imagehosting.oss-cn-shanghai.aliyuncs.com/img/5adf586d0001bad019201080.jpg" alt="img"></p>
<p><strong>带请求头的请求</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">&quot;description&quot;</span>: <span class="string">&quot;这是一个带有headers的post请求&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;request&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;uri&quot;</span>: <span class="string">&quot;/post/with/headers&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;method&quot;</span>: <span class="string">&quot;post&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;headers&quot;</span>: &#123;</span><br><span class="line">            	<span class="attr">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">&quot;json&quot;</span>: &#123;</span><br><span class="line">            	<span class="attr">&quot;name&quot;</span>: <span class="string">&quot;kola&quot;</span>,</span><br><span class="line">            	<span class="attr">&quot;age&quot;</span>: <span class="string">&quot;18&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;response&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;json&quot;</span>: &#123;</span><br><span class="line">                <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;kola&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;status&quot;</span>: <span class="string">&quot;1&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p><img src="http://typora-imagehosting.oss-cn-shanghai.aliyuncs.com/img/60aa6f2f000133c519201080.jpg" alt="img"></p>
<p><strong>重定向</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">&quot;description&quot;</span>: <span class="string">&quot;重定向到百度&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;request&quot;</span>: &#123;</span><br><span class="line">        	<span class="attr">&quot;uri&quot;</span>: <span class="string">&quot;/redirect&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;redirectTo&quot;</span>: <span class="string">&quot;http://www.baidu.com&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">&quot;description&quot;</span>: <span class="string">&quot;重定向到自己的网页&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;request&quot;</span>: &#123;</span><br><span class="line">        	<span class="attr">&quot;uri&quot;</span>: <span class="string">&quot;/redirect/topath&quot;</span></span><br><span class="line">    	&#125;,</span><br><span class="line">    	<span class="attr">&quot;redirectTo&quot;</span>: <span class="string">&quot;/redirect/new&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">&quot;description&quot;</span>: <span class="string">&quot;我是被重定向的内容&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;request&quot;</span>: &#123;</span><br><span class="line">        	<span class="attr">&quot;uri&quot;</span>: <span class="string">&quot;/redirect/new&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;response&quot;</span>: &#123;</span><br><span class="line">        	<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;congratulations！&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="5-HttpClient"><a href="#5-HttpClient" class="headerlink" title="5 HttpClient"></a>5 HttpClient</h4><p>HttpClient 模拟客服端发送的请求</p>
<p>Maven依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.httpcomponents<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>httpclient<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.5.13<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Demo</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyHttpClient_Get</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getTest</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 用来存放结果</span></span><br><span class="line">        String result;</span><br><span class="line">        <span class="comment">// 创建get方法</span></span><br><span class="line">        HttpGet get = <span class="keyword">new</span> HttpGet(<span class="string">&quot;http://www.baidu.com&quot;</span>);</span><br><span class="line">        <span class="comment">// 执行get方法</span></span><br><span class="line">        HttpClient httpClient = <span class="keyword">new</span> DefaultHttpClient();</span><br><span class="line">        HttpResponse response = httpClient.execute(get);</span><br><span class="line">        <span class="comment">// 获取整个响应的全部内容，并把它转化为字符串(为了防止乱码，加上编码格式utf-8</span></span><br><span class="line">        result = EntityUtils.toString(response.getEntity(), <span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        System.out.println(result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Mock配置</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">&quot;description&quot;</span>:<span class="string">&quot;这是个会返回cookies信息的get请求&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;request&quot;</span>:&#123;</span><br><span class="line">            <span class="attr">&quot;uri&quot;</span>:<span class="string">&quot;/getCookies&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;method&quot;</span>:<span class="string">&quot;get&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;response&quot;</span>:&#123;</span><br><span class="line">            <span class="attr">&quot;cookies&quot;</span>:&#123;</span><br><span class="line">                <span class="attr">&quot;login&quot;</span>: <span class="string">&quot;true&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;status&quot;</span>:<span class="string">&quot;10000&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">&quot;text&quot;</span>:<span class="string">&quot;恭喜你成功啦&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">&quot;description&quot;</span>:<span class="string">&quot;这是个带cookies信息的get请求&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;request&quot;</span>:&#123;</span><br><span class="line">            <span class="attr">&quot;uri&quot;</span>:<span class="string">&quot;/get/with/cookies&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;method&quot;</span>:<span class="string">&quot;get&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;cookies&quot;</span>:&#123;</span><br><span class="line">                <span class="attr">&quot;login&quot;</span>: <span class="string">&quot;true&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;response&quot;</span>:&#123;</span><br><span class="line">            </span><br><span class="line">            <span class="attr">&quot;text&quot;</span>:<span class="string">&quot;恭喜你成功啦&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>在resources文件夹下新建一配置文件 xxx.properties（ xxx.properties都是以Kev=values的形式写的）如：test.url=<a target="_blank" rel="noopener" href="http://localhost:8000/">http://localhost:8000</a></p>
<p>获取配置文件中的值，并模拟客户端发送Http请求</p>
<p>Get请求</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.course.httpclient.cookies;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.http.HttpResponse;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.CookieStore;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.methods.HttpGet;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.cookie.Cookie;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.impl.client.DefaultHttpClient;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.util.EntityUtils;</span><br><span class="line"><span class="keyword">import</span> org.testng.annotations.BeforeTest;</span><br><span class="line"><span class="keyword">import</span> org.testng.annotations.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Locale;</span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyCookiesForGet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String url;</span><br><span class="line">    <span class="keyword">private</span> ResourceBundle bundle;</span><br><span class="line">    <span class="comment">//用来存储cookies信息的变量</span></span><br><span class="line">    <span class="keyword">private</span> CookieStore store;</span><br><span class="line">    <span class="meta">@BeforeTest</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">beforeTest</span><span class="params">()</span></span>&#123;</span><br><span class="line">        bundle = ResourceBundle.getBundle(<span class="string">&quot;application&quot;</span>, Locale.CHINA);</span><br><span class="line">        url = bundle.getString(<span class="string">&quot;test.url&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testGetCookies</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">        String result;</span><br><span class="line"><span class="comment">//       从配置文件中 拼接测试的url</span></span><br><span class="line">        String uri = bundle.getString(<span class="string">&quot;getCookies.uri&quot;</span>);</span><br><span class="line">        String testUrl = <span class="keyword">this</span>.url+uri;</span><br><span class="line"></span><br><span class="line"><span class="comment">//        测试逻辑代码书写</span></span><br><span class="line">        HttpGet get = <span class="keyword">new</span> HttpGet(testUrl);</span><br><span class="line">        DefaultHttpClient client = <span class="keyword">new</span> DefaultHttpClient();</span><br><span class="line">        HttpResponse response = client.execute(get);</span><br><span class="line">        result = EntityUtils.toString(response.getEntity(),<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        System.out.println(result);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取cookies信息</span></span><br><span class="line">        <span class="keyword">this</span>.store = client.getCookieStore();</span><br><span class="line">        List&lt;Cookie&gt; cookieList = store.getCookies();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (Cookie cookie : cookieList)&#123;</span><br><span class="line">            String name = cookie.getName();</span><br><span class="line">            String value = cookie.getValue();</span><br><span class="line">            System.out.println(<span class="string">&quot;cookie name = &quot;</span> + name</span><br><span class="line">            + <span class="string">&quot;;  cookie value = &quot;</span> + value);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test(dependsOnMethods = &#123;&quot;testGetCookies&quot;&#125;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testGetWithCookies</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        String uri = bundle.getString(<span class="string">&quot;test.get.with.cookies&quot;</span>);</span><br><span class="line">        String testUrl = <span class="keyword">this</span>.url+uri;</span><br><span class="line">        HttpGet get = <span class="keyword">new</span> HttpGet(testUrl);</span><br><span class="line">        DefaultHttpClient client = <span class="keyword">new</span> DefaultHttpClient();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//设置cookies信息</span></span><br><span class="line">        client.setCookieStore(<span class="keyword">this</span>.store);</span><br><span class="line"></span><br><span class="line">        HttpResponse response = client.execute(get);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取响应的状态码</span></span><br><span class="line">        <span class="keyword">int</span> statusCode = response.getStatusLine().getStatusCode();</span><br><span class="line">        System.out.println(<span class="string">&quot;statusCode = &quot;</span> + statusCode);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(statusCode == <span class="number">200</span>)&#123;</span><br><span class="line">            String result = EntityUtils.toString(response.getEntity(),<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">            System.out.println(result);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Post请求</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.course.httpclient.cookies;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.http.HttpResponse;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.CookieStore;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.methods.HttpGet;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.methods.HttpPost;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.cookie.Cookie;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.entity.StringEntity;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.impl.client.DefaultHttpClient;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.util.EntityUtils;</span><br><span class="line"><span class="keyword">import</span> org.json.JSONObject;</span><br><span class="line"><span class="keyword">import</span> org.testng.Assert;</span><br><span class="line"><span class="keyword">import</span> org.testng.annotations.BeforeTest;</span><br><span class="line"><span class="keyword">import</span> org.testng.annotations.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.UnsupportedEncodingException;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Locale;</span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyCookiesForPost</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String url;</span><br><span class="line">    <span class="keyword">private</span> ResourceBundle bundle;</span><br><span class="line">    <span class="comment">//用来存储cookies信息的变量</span></span><br><span class="line">    <span class="keyword">private</span> CookieStore store;</span><br><span class="line">    <span class="meta">@BeforeTest</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">beforeTest</span><span class="params">()</span></span>&#123;</span><br><span class="line">        bundle = ResourceBundle.getBundle(<span class="string">&quot;application&quot;</span>, Locale.CHINA);</span><br><span class="line">        url = bundle.getString(<span class="string">&quot;test.url&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testGetCookies</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">        String result;</span><br><span class="line"><span class="comment">//       从配置文件中 拼接测试的url</span></span><br><span class="line">        String uri = bundle.getString(<span class="string">&quot;getCookies.uri&quot;</span>);</span><br><span class="line">        String testUrl = <span class="keyword">this</span>.url+uri;</span><br><span class="line"></span><br><span class="line"><span class="comment">//        测试逻辑代码书写</span></span><br><span class="line">        HttpGet get = <span class="keyword">new</span> HttpGet(testUrl);</span><br><span class="line">        DefaultHttpClient client = <span class="keyword">new</span> DefaultHttpClient();</span><br><span class="line">        HttpResponse response = client.execute(get);</span><br><span class="line">        result = EntityUtils.toString(response.getEntity(),<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        System.out.println(result);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取cookies信息</span></span><br><span class="line">        <span class="keyword">this</span>.store = client.getCookieStore();</span><br><span class="line">        List&lt;Cookie&gt; cookieList = store.getCookies();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (Cookie cookie : cookieList)&#123;</span><br><span class="line">            String name = cookie.getName();</span><br><span class="line">            String value = cookie.getValue();</span><br><span class="line">            System.out.println(<span class="string">&quot;cookie name = &quot;</span> + name</span><br><span class="line">                    + <span class="string">&quot;;  cookie value = &quot;</span> + value);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test(dependsOnMethods = &#123;&quot;testGetCookies&quot;&#125;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testPostMethod</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        String uri = bundle.getString(<span class="string">&quot;test.post.with.cookies&quot;</span>);</span><br><span class="line">        <span class="comment">//拼接最终的测试地址</span></span><br><span class="line">        String testUrl = <span class="keyword">this</span>.url + uri;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//声明一个Client对象，用来进行方法的执行</span></span><br><span class="line">        DefaultHttpClient client = <span class="keyword">new</span> DefaultHttpClient();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//声明一个方法，这个方法就是post方法</span></span><br><span class="line">        HttpPost post = <span class="keyword">new</span> HttpPost(testUrl);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//添加参数</span></span><br><span class="line">        JSONObject param = <span class="keyword">new</span> JSONObject();</span><br><span class="line">        param.put(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;huhansan&quot;</span>);</span><br><span class="line">        param.put(<span class="string">&quot;age&quot;</span>,<span class="string">&quot;18&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//设置请求头信息 设置header</span></span><br><span class="line">        post.setHeader(<span class="string">&quot;content-type&quot;</span>,<span class="string">&quot;application/json&quot;</span>);</span><br><span class="line">        <span class="comment">//将参数信息添加到方法中</span></span><br><span class="line">        StringEntity entity = <span class="keyword">new</span> StringEntity(param.toString(),<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        post.setEntity(entity);</span><br><span class="line">        <span class="comment">//声明一个对象来进行响应结果的存储</span></span><br><span class="line">        String result;</span><br><span class="line">        <span class="comment">//设置cookies信息</span></span><br><span class="line">        client.setCookieStore(<span class="keyword">this</span>.store);</span><br><span class="line">        <span class="comment">//执行post方法</span></span><br><span class="line">        HttpResponse response = client.execute(post);</span><br><span class="line">        <span class="comment">//获取响应结果</span></span><br><span class="line">        result = EntityUtils.toString(response.getEntity(),<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        System.out.println(result);</span><br><span class="line">        <span class="comment">//处理结果，就是判断返回结果是否符合预期</span></span><br><span class="line">        <span class="comment">//将返回的响应结果字符串转化成为json对象</span></span><br><span class="line">        JSONObject resultJson = <span class="keyword">new</span> JSONObject(result);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取到结果值</span></span><br><span class="line">        String success = (String) resultJson.get(<span class="string">&quot;huhansan&quot;</span>);</span><br><span class="line">        String status = (String) resultJson.get(<span class="string">&quot;status&quot;</span>);</span><br><span class="line">        <span class="comment">//具体的判断返回结果的值</span></span><br><span class="line">        Assert.assertEquals(<span class="string">&quot;success&quot;</span>,success);</span><br><span class="line">        Assert.assertEquals(<span class="string">&quot;1&quot;</span>,status);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="6-SpringBoot项目实战"><a href="#6-SpringBoot项目实战" class="headerlink" title="6 SpringBoot项目实战"></a>6 SpringBoot项目实战</h4><h5 id="6-1-Swagger"><a href="#6-1-Swagger" class="headerlink" title="6.1 Swagger"></a>6.1 Swagger</h5><p>SwaggerUI可以自动生成接口文档，不需要频繁更新接口文档，保证接口文档与代码的一致，同时也方便了测试人员的接口测试工作。</p>
<p>Maven依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">swagger.version</span>&gt;</span>2.6.1<span class="tag">&lt;/<span class="name">swagger.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;swagger.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;swagger.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>SwaggerConfig</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.builders.ApiInfoBuilder;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.builders.PathSelectors;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.service.ApiInfo;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.service.Contact;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.spi.DocumentationType;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.spring.web.plugins.Docket;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.swagger2.annotations.EnableSwagger2;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableSwagger2</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SwaggerConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Docket <span class="title">api</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Docket(DocumentationType.SWAGGER_2)</span><br><span class="line">                .apiInfo(apiInfo())</span><br><span class="line">                .pathMapping(<span class="string">&quot;/&quot;</span>)</span><br><span class="line">                .select()</span><br><span class="line">                .paths(PathSelectors.regex(<span class="string">&quot;/.*&quot;</span>))</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//基本信息，页面展示</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> ApiInfo <span class="title">apiInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span>  <span class="keyword">new</span> ApiInfoBuilder().title(<span class="string">&quot;我的接口文档&quot;</span>)</span><br><span class="line">                .contact(<span class="keyword">new</span> Contact(<span class="string">&quot;zhg&quot;</span>,<span class="string">&quot;&quot;</span>,<span class="string">&quot;zhomgun@foxmail.com&quot;</span>))</span><br><span class="line">                .description(<span class="string">&quot;这是我的swaggerui生成的接口文档&quot;</span>)</span><br><span class="line">                .version(<span class="string">&quot;1.0.0.0&quot;</span>)</span><br><span class="line">                .build();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>Controller层</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="comment">//Api注解，描述信息 可通过tag进行分类</span></span><br><span class="line"><span class="meta">@Api(value = &quot;/&quot;,description = &quot;这是我全部的get方法&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyGetMethod</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/getCookies&quot;,method = RequestMethod.GET)</span></span><br><span class="line">    <span class="comment">//方法描述</span></span><br><span class="line">    <span class="meta">@ApiOperation(value = &quot;通过这个方法可以获取到Cookies&quot;,httpMethod = &quot;GET&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getCookies</span><span class="params">(HttpServletResponse response)</span></span>&#123;</span><br><span class="line">        <span class="comment">//HttpServerletRequest 装请求信息的类</span></span><br><span class="line">        <span class="comment">//HttpServerletResponse  装响应信息的类</span></span><br><span class="line">        Cookie cookie = <span class="keyword">new</span> Cookie(<span class="string">&quot;login&quot;</span>,<span class="string">&quot;true&quot;</span>);</span><br><span class="line">        response.addCookie(cookie);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;恭喜你获得cookies信息成功&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以上配置完成之后，直接启动项目，访问地址：localhost:端口号/swagger-ui.html,页面如下。</p>
<p><img src="http://typora-imagehosting.oss-cn-shanghai.aliyuncs.com/img/60b20f010001610b19201080.jpg" alt="img"></p>
<h5 id="6-2-MyBatis"><a href="#6-2-MyBatis" class="headerlink" title="6.2 MyBatis"></a>6.2 MyBatis</h5><p>Maven依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.zhg<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>MyLogDemo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.5.3.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.16.14<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.38<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.47<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>SpringBoot中默认使用的Logback日志系统，所以SpringBoot已经集成了相关依赖，无需多余的依赖，只需在src/main/resources文件夹下，增加logback-spring.xml这个配置文件。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">resource</span>=<span class="string">&quot;org/springframework/boot/logging/logback/defaults.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;FILE_LOG_PATTERN&quot;</span> <span class="attr">value</span>=<span class="string">&quot;%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;80&#125; - %msg%n&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;LOG_PATH&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;LOG_PATH:-$&#123;LOG_TEMP:-$&#123;java.io.tmpdir:-/tmp&#125;&#125;&#125;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;FILE&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">file</span>&gt;</span>$&#123;LOG_PATH&#125;/$&#123;LOG_FILE&#125;<span class="tag">&lt;/<span class="name">file</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;LOG_PATH&#125;/$&#123;LOG_FILE&#125;.%d&#123;yyyy-MM-dd&#125;<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>$&#123;FILE_LOG_PATTERN&#125;<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;STDOUT&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>$&#123;FILE_LOG_PATTERN&#125;<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;CRAWLER_LOG&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">file</span>&gt;</span>$&#123;LOG_PATH&#125;/event.log<span class="tag">&lt;/<span class="name">file</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;LOG_PATH&#125;/event.%d&#123;yyyy-MM-dd&#125;.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>30<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.encoder.PatternLayoutEncoder&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;com.business.intelligence.util.CrawlerLogger&quot;</span> <span class="attr">level</span>=<span class="string">&quot;INFO&quot;</span> <span class="attr">additivity</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;CRAWLER_LOG&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">&quot;INFO&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;STDOUT&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;FILE&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>application.yml</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">   <span class="attr">port:</span> <span class="number">8888</span></span><br><span class="line"></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">logs</span></span><br><span class="line">    <span class="attr">file:</span> <span class="string">mylog.log</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">   <span class="attr">application:</span></span><br><span class="line">          <span class="attr">name:</span> <span class="string">report</span></span><br><span class="line">   <span class="attr">datasource:</span></span><br><span class="line">       <span class="attr">driver-class-name:</span> <span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line">       <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/testdb?serverTimezone=UTC&amp;useUnicode=true&amp;characterEncoding=utf-8</span></span><br><span class="line">       <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">       <span class="attr">password:</span> <span class="number">1031</span></span><br><span class="line"></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">    <span class="attr">type-aliases-package:</span> <span class="string">com.course.model</span></span><br><span class="line">    <span class="attr">mapper-locations:</span></span><br><span class="line">       <span class="bullet">-</span> <span class="string">mapper/*</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Model（User）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.course.model;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String sex;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>mapper</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.course&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserCount&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Integer&quot;</span>&gt;</span></span><br><span class="line">        select count(*) from user;</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.course.model.User&quot;</span>&gt;</span></span><br><span class="line">        insert into user(id,name,age,sex)</span><br><span class="line">        values(#&#123;id&#125;,#&#123;name&#125;,#&#123;age&#125;,#&#123;sex&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.course.model.User&quot;</span>&gt;</span></span><br><span class="line">        update user set name=#&#123;name&#125;,age=#&#123;age&#125;</span><br><span class="line">        where id=#&#123;id&#125;</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Integer&quot;</span>&gt;</span></span><br><span class="line">        delete from user where id = #&#123;id&#125;</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Controller</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.course.controller;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.course.model.User;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.Api;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiOperation;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.log4j.Log4j;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.SqlSessionTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Log4j</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@Api(value = &quot;v1&quot;,description = &quot;这是我的第一个版本的demo&quot;)</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;v1&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//首先获取一个执行sql语句的对象</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> SqlSessionTemplate template;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/getUserCount&quot;,method = RequestMethod.GET)</span></span><br><span class="line">    <span class="meta">@ApiOperation(value = &quot;可以获取到用户数&quot;,httpMethod = &quot;GET&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getUserCount</span><span class="params">()</span></span>&#123;</span><br><span class="line">       <span class="keyword">return</span> template.selectOne(<span class="string">&quot;getUserCount&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/addUser&quot;,method = RequestMethod.POST)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">addUser</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> result = template.insert(<span class="string">&quot;addUser&quot;</span>,user);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/updateUser&quot;,method = RequestMethod.POST)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">updateUser</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">return</span>  template.update(<span class="string">&quot;updateUser&quot;</span>,user);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/deleteUser&quot;,method = RequestMethod.GET)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">delUser</span><span class="params">(<span class="meta">@RequestParam</span> <span class="keyword">int</span> id)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> template.delete(<span class="string">&quot;deleteUser&quot;</span>,id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Application（启动类）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.course;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ConfigurableApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.scheduling.annotation.EnableScheduling;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.PreDestroy;</span><br><span class="line"></span><br><span class="line"><span class="meta">@EnableScheduling</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Application</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span>  <span class="keyword">static</span> ConfigurableApplicationContext context;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Application.context = SpringApplication.run(Application.class,args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PreDestroy</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Application.context.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="6-3-用例管理"><a href="#6-3-用例管理" class="headerlink" title="6.3 用例管理"></a>6.3 用例管理</h5><p><strong>测试用例表结构设计</strong></p>
<p>user表包含一些基础信息，用户名，密码等。</p>
<p><img src="http://typora-imagehosting.oss-cn-shanghai.aliyuncs.com/img/6044eb7a00013c3c19201080.jpg" alt="img"></p>
<p>设计测试用例，并创建测试用例表，对应不同接口的操作。</p>
<p><img src="http://typora-imagehosting.oss-cn-shanghai.aliyuncs.com/img/6043692e0001d96a19201080.jpg" alt="img"></p>
<p><img src="http://typora-imagehosting.oss-cn-shanghai.aliyuncs.com/img/604369100001160919201080.jpg" alt="img"></p>
<p><img src="http://typora-imagehosting.oss-cn-shanghai.aliyuncs.com/img/60bf0d9e0001a33a19201080.jpg" alt="img"></p>
<p>查询和更新的测试用例表，expected里都是查询mapper的id。</p>
<p><strong>基础配置</strong>：maven、spring、mybatis、mapper、testng(ExtentTestNGIReporterListener)</p>
<p>mapper</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span> <span class="meta-keyword">PUBLIC</span> <span class="meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 命名空间mapper,如果有多个mapper文件，这个必须唯一 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.tester.model&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--获取登陆接口case--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;loginCase&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Integer&quot;</span>  <span class="attr">resultType</span>=<span class="string">&quot;com.tester.model.LoginCase&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        select * from loginCase</span><br><span class="line">        where id = #&#123;id&#125;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--添加用户接口case--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;addUserCase&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Integer&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.tester.model.AddUserCase&quot;</span>&gt;</span></span><br><span class="line">        select * from addUserCase where id=#&#123;id&#125;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--获取用户信息case--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserInfoCase&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Integer&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.tester.model.GetUserInfoCase&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- SQL语句 --&gt;</span></span><br><span class="line">        select * from getUserInfoCase where id=#&#123;id&#125;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--获取用户列表case--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserListCase&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Integer&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.tester.model.GetUserListCase&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- SQL语句 --&gt;</span></span><br><span class="line">        select * from getUserListCase where id=#&#123;id&#125;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--更新/删除用户信息case--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;updateUserInfoCase&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Integer&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.tester.model.UpdateUserInfoCase&quot;</span>&gt;</span></span><br><span class="line">        select * from updateUserInfoCase where id = #&#123;id&#125;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--添加用户接口--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;addUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.tester.model.AddUserCase&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.tester.model.User&quot;</span>&gt;</span></span><br><span class="line">        select * from user where</span><br><span class="line">        userName=#&#123;userName&#125;</span><br><span class="line">        and password=#&#123;password&#125;</span><br><span class="line">        and sex=#&#123;sex&#125;</span><br><span class="line">        and age=#&#123;age&#125;</span><br><span class="line">        and permission=#&#123;permission&#125;</span><br><span class="line">        and isDelete=#&#123;isDelete&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--获取用户信息--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserInfo&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.tester.model.GetUserInfoCase&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.tester.model.User&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- SQL语句 --&gt;</span></span><br><span class="line">        select * from user where</span><br><span class="line">        id=#&#123;userId&#125;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--获取用户列表--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserList&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.tester.model.GetUserListCase&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.tester.model.User&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- SQL语句 --&gt;</span></span><br><span class="line">        select * from user</span><br><span class="line">        <span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;WHERE&quot;</span> <span class="attr">prefixOverrides</span>=<span class="string">&quot;and&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;null != userName and &#x27;&#x27; !=userName&quot;</span>&gt;</span></span><br><span class="line">                AND userName=#&#123;userName&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;null != sex and &#x27;&#x27; !=sex&quot;</span>&gt;</span></span><br><span class="line">                AND sex=#&#123;sex&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;null != age and &#x27;&#x27; !=age&quot;</span>&gt;</span></span><br><span class="line">                AND age=#&#123;age&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line">        ;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--获取更新后的数据--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUpdateUserInfo&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.tester.model.UpdateUserInfoCase&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.tester.model.User&quot;</span>&gt;</span></span><br><span class="line">        select * from user</span><br><span class="line">        <span class="tag">&lt;<span class="name">trim</span> <span class="attr">prefix</span>=<span class="string">&quot;WHERE&quot;</span> <span class="attr">prefixOverrides</span>=<span class="string">&quot;and&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;null != userName and &#x27;&#x27; !=userName&quot;</span>&gt;</span></span><br><span class="line">                AND userName=#&#123;userName&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;null != sex and &#x27;&#x27; !=sex&quot;</span>&gt;</span></span><br><span class="line">                AND sex=#&#123;sex&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;null != age and &#x27;&#x27; !=age&quot;</span>&gt;</span></span><br><span class="line">                AND age=#&#123;age&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;null != permission and &#x27;&#x27; !=permission&quot;</span>&gt;</span></span><br><span class="line">                AND permission=#&#123;permission&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;null != isDelete and &#x27;&#x27; !=isDelete&quot;</span>&gt;</span></span><br><span class="line">                AND isDelete=#&#123;isDelete&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">trim</span>&gt;</span></span><br><span class="line">       And id = #&#123;userId&#125;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>&lt;trim prefix=&quot;WHERE&quot; prefixOverrides=&quot;and&quot;&gt;</code>、<code>&lt;trim prefix=&quot;SET&quot; suffixOverrides=&quot;,&quot;&gt;</code>用于去除sql语句中多余的and关键字，逗号，或者给sql语句前拼接 “where“、“set“以及“values(“ 等前缀，或者添加“)“等后缀，可用于选择性插入、更新、删除或者条件查询等操作。</p>
<p>application.properties（存储接口URL常量）→ConfigFile.java→TestConfig.java（存储接口URL，用CookieStore存储Cookie信息，声明客户端DefaultHttpClient，都为静态变量）</p>
<p>ConfigFile.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.tester.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.tester.model.InterfaceName;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Locale;</span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConfigFile</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> ResourceBundle bundle= ResourceBundle.getBundle(<span class="string">&quot;application&quot;</span>, Locale.CHINA);</span><br><span class="line"><span class="comment">// InterfaceName是定义的枚举类，表示测试的接口</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getUrl</span><span class="params">(InterfaceName name)</span></span>&#123;</span><br><span class="line">        String address = bundle.getString(<span class="string">&quot;test.url&quot;</span>);</span><br><span class="line">        String uri = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        String testUrl;</span><br><span class="line">        <span class="keyword">if</span>(name == InterfaceName.GETUSERLIST)&#123;</span><br><span class="line">            uri = bundle.getString(<span class="string">&quot;getUserList.uri&quot;</span>);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(name == InterfaceName.LOGIN)&#123;</span><br><span class="line">            uri = bundle.getString(<span class="string">&quot;login.uri&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(name == InterfaceName.UPDATEUSERINFO)&#123;</span><br><span class="line">            uri = bundle.getString(<span class="string">&quot;updateUserInfo.uri&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(name == InterfaceName.GETUSERINFO)&#123;</span><br><span class="line">            uri = bundle.getString(<span class="string">&quot;getUserInfo.uri&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(name == InterfaceName.ADDUSERINFO)&#123;</span><br><span class="line">            uri = bundle.getString(<span class="string">&quot;addUser.uri&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        testUrl = address + uri;</span><br><span class="line">        <span class="keyword">return</span> testUrl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>DatabaseUtil.java（mysql数据源配置文件→SqlSessionFactory→SqlSession）</p>
<p><strong>Model层</strong>（包括查询对象及相关测试用例）</p>
<h5 id="6-4-数据校验"><a href="#6-4-数据校验" class="headerlink" title="6.4 数据校验"></a>6.4 数据校验</h5><p>maven依赖：swagger-ui（SwaggerConfig）、fastjson</p>
<p>Controller层（开发接口）→Cases</p>
<p>Cases**（测试用例，将接口执行结果与本地测试用例预期结果相比较）</p>
<p>LoginTest.java（BeforeTest初始化）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.tester.cases;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.tester.model.InterfaceName;</span><br><span class="line"><span class="keyword">import</span> com.tester.config.TestConfig;</span><br><span class="line"><span class="keyword">import</span> com.tester.model.LoginCase;</span><br><span class="line"><span class="keyword">import</span> com.tester.utils.ConfigFile;</span><br><span class="line"><span class="keyword">import</span> com.tester.utils.DatabaseUtil;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.HttpResponse;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.methods.HttpPost;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.entity.StringEntity;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.impl.client.DefaultHttpClient;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.util.EntityUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.json.JSONObject;</span><br><span class="line"><span class="keyword">import</span> org.testng.Assert;</span><br><span class="line"><span class="keyword">import</span> org.testng.annotations.BeforeTest;</span><br><span class="line"><span class="keyword">import</span> org.testng.annotations.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@BeforeTest(groups = &quot;loginTrue&quot;,description = &quot;测试准备工作,获取HttpClient对象&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">beforeTest</span><span class="params">()</span></span>&#123;</span><br><span class="line">        TestConfig.defaultHttpClient = <span class="keyword">new</span> DefaultHttpClient();</span><br><span class="line">        TestConfig.getUserInfoUrl = ConfigFile.getUrl(InterfaceName.GETUSERINFO);</span><br><span class="line">        TestConfig.getUserListUrl = ConfigFile.getUrl(InterfaceName.GETUSERLIST);</span><br><span class="line">        TestConfig.loginUrl = ConfigFile.getUrl(InterfaceName.LOGIN);</span><br><span class="line">        TestConfig.updateUserInfoUrl = ConfigFile.getUrl(InterfaceName.UPDATEUSERINFO);</span><br><span class="line">        TestConfig.addUserUrl = ConfigFile.getUrl(InterfaceName.ADDUSERINFO);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test(groups = &quot;loginTrue&quot;,description = &quot;用户成功登陆接口&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">loginTrue</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">        SqlSession session = DatabaseUtil.getSqlSession();</span><br><span class="line">        LoginCase loginCase = session.selectOne(<span class="string">&quot;loginCase&quot;</span>,<span class="number">1</span>);</span><br><span class="line">        System.out.println(loginCase.toString());</span><br><span class="line">        System.out.println(TestConfig.loginUrl);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//下边的代码为写完接口的测试代码</span></span><br><span class="line">        String result = getResult(loginCase);</span><br><span class="line">        <span class="comment">//处理结果，就是判断返回结果是否符合预期</span></span><br><span class="line">        Assert.assertEquals(loginCase.getExpected(),result);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test(description = &quot;用户登陆失败接口&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">loginFalse</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        SqlSession session = DatabaseUtil.getSqlSession();</span><br><span class="line">        LoginCase loginCase = session.selectOne(<span class="string">&quot;loginCase&quot;</span>,<span class="number">2</span>);</span><br><span class="line">        System.out.println(loginCase.toString());</span><br><span class="line">        System.out.println(TestConfig.loginUrl);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//下边的代码为写完接口的测试代码</span></span><br><span class="line">        String result = getResult(loginCase);</span><br><span class="line">        <span class="comment">//处理结果，就是判断返回结果是否符合预期</span></span><br><span class="line">        Assert.assertEquals(loginCase.getExpected(),result);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">getResult</span><span class="params">(LoginCase loginCase)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">//下边的代码为写完接口的测试代码</span></span><br><span class="line">        HttpPost post = <span class="keyword">new</span> HttpPost(TestConfig.loginUrl);</span><br><span class="line">        JSONObject param = <span class="keyword">new</span> JSONObject();</span><br><span class="line">        param.put(<span class="string">&quot;userName&quot;</span>,loginCase.getUserName());</span><br><span class="line">        param.put(<span class="string">&quot;password&quot;</span>,loginCase.getPassword());</span><br><span class="line">        <span class="comment">//设置请求头信息 设置header</span></span><br><span class="line">        post.setHeader(<span class="string">&quot;content-type&quot;</span>,<span class="string">&quot;application/json&quot;</span>);</span><br><span class="line">        <span class="comment">//将参数信息添加到方法中</span></span><br><span class="line">        StringEntity entity = <span class="keyword">new</span> StringEntity(param.toString(),<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        post.setEntity(entity);</span><br><span class="line">        <span class="comment">//声明一个对象来进行响应结果的存储</span></span><br><span class="line">        String result;</span><br><span class="line">        <span class="comment">//执行post方法</span></span><br><span class="line">        HttpResponse response = TestConfig.defaultHttpClient.execute(post);</span><br><span class="line">        <span class="comment">//获取响应结果</span></span><br><span class="line">        result = EntityUtils.toString(response.getEntity(),<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        System.out.println(result);</span><br><span class="line">        TestConfig.store = TestConfig.defaultHttpClient.getCookieStore();</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>AddUserTest.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.tester.cases;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.tester.config.TestConfig;</span><br><span class="line"><span class="keyword">import</span> com.tester.model.AddUserCase;</span><br><span class="line"><span class="keyword">import</span> com.tester.model.User;</span><br><span class="line"><span class="keyword">import</span> com.tester.utils.DatabaseUtil;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.HttpResponse;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.methods.HttpPost;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.entity.StringEntity;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.util.EntityUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.json.JSONObject;</span><br><span class="line"><span class="keyword">import</span> org.testng.Assert;</span><br><span class="line"><span class="keyword">import</span> org.testng.annotations.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AddUserTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test(dependsOnGroups = &quot;loginTrue&quot;,description = &quot;添加用户接口接口&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addUser</span><span class="params">()</span> <span class="keyword">throws</span> IOException, InterruptedException </span>&#123;</span><br><span class="line"></span><br><span class="line">        SqlSession session = DatabaseUtil.getSqlSession();</span><br><span class="line">        AddUserCase addUserCase = session.selectOne(<span class="string">&quot;addUserCase&quot;</span>,<span class="number">1</span>);</span><br><span class="line">        System.out.println(addUserCase.toString());</span><br><span class="line">        System.out.println(TestConfig.addUserUrl);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//下边的代码为写完接口的测试代码</span></span><br><span class="line">        String result = getResult(addUserCase);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 可以先讲</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">//查询用户看是否添加成功</span></span><br><span class="line">        Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">        User user = session.selectOne(<span class="string">&quot;addUser&quot;</span>,addUserCase);</span><br><span class="line">        System.out.println(user.toString());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//处理结果，就是判断返回结果是否符合预期</span></span><br><span class="line">        Assert.assertEquals(addUserCase.getExpected(),result);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">getResult</span><span class="params">(AddUserCase addUserCase)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">//下边的代码为写完接口的测试代码</span></span><br><span class="line">        HttpPost post = <span class="keyword">new</span> HttpPost(TestConfig.addUserUrl);</span><br><span class="line">        JSONObject param = <span class="keyword">new</span> JSONObject();</span><br><span class="line">        param.put(<span class="string">&quot;userName&quot;</span>,addUserCase.getUserName());</span><br><span class="line">        param.put(<span class="string">&quot;password&quot;</span>,addUserCase.getPassword());</span><br><span class="line">        param.put(<span class="string">&quot;sex&quot;</span>,addUserCase.getSex());</span><br><span class="line">        param.put(<span class="string">&quot;age&quot;</span>,addUserCase.getAge());</span><br><span class="line">        param.put(<span class="string">&quot;permission&quot;</span>,addUserCase.getPermission());</span><br><span class="line">        param.put(<span class="string">&quot;isDelete&quot;</span>,addUserCase.getIsDelete());</span><br><span class="line">        <span class="comment">//设置请求头信息 设置header</span></span><br><span class="line">        post.setHeader(<span class="string">&quot;content-type&quot;</span>,<span class="string">&quot;application/json&quot;</span>);</span><br><span class="line">        <span class="comment">//将参数信息添加到方法中</span></span><br><span class="line">        StringEntity entity = <span class="keyword">new</span> StringEntity(param.toString(),<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        post.setEntity(entity);</span><br><span class="line">        <span class="comment">//设置cookies</span></span><br><span class="line">        TestConfig.defaultHttpClient.setCookieStore(TestConfig.store);</span><br><span class="line">        <span class="comment">//声明一个对象来进行响应结果的存储</span></span><br><span class="line">        String result;</span><br><span class="line">        <span class="comment">//执行post方法</span></span><br><span class="line">        HttpResponse response = TestConfig.defaultHttpClient.execute(post);</span><br><span class="line">        <span class="comment">//获取响应结果</span></span><br><span class="line">        result = EntityUtils.toString(response.getEntity(),<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        System.out.println(result);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>GetUserInfoTest.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.tester.cases;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.tester.config.TestConfig;</span><br><span class="line"><span class="keyword">import</span> com.tester.model.GetUserInfoCase;</span><br><span class="line"><span class="keyword">import</span> com.tester.model.GetUserListCase;</span><br><span class="line"><span class="keyword">import</span> com.tester.model.User;</span><br><span class="line"><span class="keyword">import</span> com.tester.utils.DatabaseUtil;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.HttpResponse;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.methods.HttpPost;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.entity.StringEntity;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.util.EntityUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.json.JSONArray;</span><br><span class="line"><span class="keyword">import</span> org.json.JSONObject;</span><br><span class="line"><span class="keyword">import</span> org.testng.Assert;</span><br><span class="line"><span class="keyword">import</span> org.testng.annotations.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GetUserInfoTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test(dependsOnGroups=&quot;loginTrue&quot;,description = &quot;获取userId为1的用户信息&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getUserInfo</span><span class="params">()</span> <span class="keyword">throws</span> IOException, InterruptedException </span>&#123;</span><br><span class="line">        SqlSession session = DatabaseUtil.getSqlSession();</span><br><span class="line">        GetUserInfoCase getUserInfoCase = session.selectOne(<span class="string">&quot;getUserInfoCase&quot;</span>,<span class="number">1</span>);</span><br><span class="line">        System.out.println(getUserInfoCase.toString());</span><br><span class="line">        System.out.println(TestConfig.getUserInfoUrl);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//下边为写完接口的代码</span></span><br><span class="line">        JSONArray resultJson = getJsonResult(getUserInfoCase);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 下边三行可以先讲</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">        User user = session.selectOne(getUserInfoCase.getExpected(),getUserInfoCase);</span><br><span class="line">        System.out.println(<span class="string">&quot;自己查库获取用户信息:&quot;</span>+user.toString());</span><br><span class="line"></span><br><span class="line">        List userList = <span class="keyword">new</span> ArrayList();</span><br><span class="line">        userList.add(user);</span><br><span class="line">        JSONArray jsonArray = <span class="keyword">new</span> JSONArray(userList);</span><br><span class="line">        System.out.println(<span class="string">&quot;获取用户信息:&quot;</span>+jsonArray.toString());</span><br><span class="line">        System.out.println(<span class="string">&quot;调用接口获取用户信息:&quot;</span>+resultJson.toString());</span><br><span class="line">        Assert.assertEquals(jsonArray,resultJson);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> JSONArray <span class="title">getJsonResult</span><span class="params">(GetUserInfoCase getUserInfoCase)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        HttpPost post = <span class="keyword">new</span> HttpPost(TestConfig.getUserInfoUrl);</span><br><span class="line">        JSONObject param = <span class="keyword">new</span> JSONObject();</span><br><span class="line">        param.put(<span class="string">&quot;id&quot;</span>,getUserInfoCase.getUserId());</span><br><span class="line">        <span class="comment">//设置请求头信息 设置header</span></span><br><span class="line">        post.setHeader(<span class="string">&quot;content-type&quot;</span>,<span class="string">&quot;application/json&quot;</span>);</span><br><span class="line">        <span class="comment">//将参数信息添加到方法中</span></span><br><span class="line">        StringEntity entity = <span class="keyword">new</span> StringEntity(param.toString(),<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        post.setEntity(entity);</span><br><span class="line">        <span class="comment">//设置cookies</span></span><br><span class="line">        TestConfig.defaultHttpClient.setCookieStore(TestConfig.store);</span><br><span class="line">        <span class="comment">//声明一个对象来进行响应结果的存储</span></span><br><span class="line">        String result;</span><br><span class="line">        <span class="comment">//执行post方法</span></span><br><span class="line">        HttpResponse response = TestConfig.defaultHttpClient.execute(post);</span><br><span class="line">        <span class="comment">//获取响应结果</span></span><br><span class="line">        result = EntityUtils.toString(response.getEntity(),<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;调用接口result:&quot;</span>+result);</span><br><span class="line">        List resultList = Arrays.asList(result);</span><br><span class="line">        JSONArray array = <span class="keyword">new</span> JSONArray(resultList);</span><br><span class="line">        System.out.println(array.toString());</span><br><span class="line">        <span class="keyword">return</span> array;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>UpdateUserInfoTest.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.tester.cases;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.tester.config.TestConfig;</span><br><span class="line"><span class="keyword">import</span> com.tester.model.UpdateUserInfoCase;</span><br><span class="line"><span class="keyword">import</span> com.tester.model.User;</span><br><span class="line"><span class="keyword">import</span> com.tester.utils.DatabaseUtil;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.HttpResponse;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.methods.HttpPost;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.entity.StringEntity;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.util.EntityUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.json.JSONObject;</span><br><span class="line"><span class="keyword">import</span> org.testng.Assert;</span><br><span class="line"><span class="keyword">import</span> org.testng.annotations.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.UnsupportedEncodingException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UpdateUserInfoTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test(dependsOnGroups = &quot;loginTrue&quot;,description = &quot;更改用户信息&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateUserInfo</span><span class="params">()</span> <span class="keyword">throws</span> IOException, InterruptedException </span>&#123;</span><br><span class="line">        SqlSession session = DatabaseUtil.getSqlSession();</span><br><span class="line">        UpdateUserInfoCase updateUserInfoCase = session.selectOne(<span class="string">&quot;updateUserInfoCase&quot;</span>,<span class="number">1</span>);</span><br><span class="line">        System.out.println(updateUserInfoCase.toString());</span><br><span class="line">        System.out.println(TestConfig.updateUserInfoUrl);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//下边为写完接口的代码</span></span><br><span class="line">        <span class="keyword">int</span> result = getResult(updateUserInfoCase);</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 下边这两行跟着测试的课讲</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">//获取更新后的结果</span></span><br><span class="line">        Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">        User user = session.selectOne(updateUserInfoCase.getExpected(),updateUserInfoCase);</span><br><span class="line">        System.out.println(user.toString());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        Assert.assertNotNull(user);</span><br><span class="line">        Assert.assertNotNull(result);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test(dependsOnGroups = &quot;loginTrue&quot;,description = &quot;删除用户&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteUser</span><span class="params">()</span> <span class="keyword">throws</span> IOException, InterruptedException </span>&#123;</span><br><span class="line">        SqlSession session = DatabaseUtil.getSqlSession();</span><br><span class="line">        UpdateUserInfoCase updateUserInfoCase = session.selectOne(<span class="string">&quot;updateUserInfoCase&quot;</span>,<span class="number">2</span>);</span><br><span class="line">        System.out.println(updateUserInfoCase.toString());</span><br><span class="line">        System.out.println(TestConfig.updateUserInfoUrl);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//下边为写完接口的代码</span></span><br><span class="line">        <span class="keyword">int</span> result = getResult(updateUserInfoCase);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 下边这两行跟着测试的课讲</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">        User user = session.selectOne(updateUserInfoCase.getExpected(),updateUserInfoCase);</span><br><span class="line">        System.out.println(user.toString());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        Assert.assertNotNull(user);</span><br><span class="line">        Assert.assertNotNull(result);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">getResult</span><span class="params">(UpdateUserInfoCase updateUserInfoCase)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        HttpPost post = <span class="keyword">new</span> HttpPost(TestConfig.updateUserInfoUrl);</span><br><span class="line">        JSONObject param = <span class="keyword">new</span> JSONObject();</span><br><span class="line">        param.put(<span class="string">&quot;id&quot;</span>,updateUserInfoCase.getUserId());</span><br><span class="line">        param.put(<span class="string">&quot;userName&quot;</span>,updateUserInfoCase.getUserName());</span><br><span class="line">        param.put(<span class="string">&quot;sex&quot;</span>,updateUserInfoCase.getSex());</span><br><span class="line">        param.put(<span class="string">&quot;age&quot;</span>,updateUserInfoCase.getAge());</span><br><span class="line">        param.put(<span class="string">&quot;permission&quot;</span>,updateUserInfoCase.getPermission());</span><br><span class="line">        param.put(<span class="string">&quot;isDelete&quot;</span>,updateUserInfoCase.getIsDelete());</span><br><span class="line">        <span class="comment">//设置请求头信息 设置header</span></span><br><span class="line">        post.setHeader(<span class="string">&quot;content-type&quot;</span>,<span class="string">&quot;application/json&quot;</span>);</span><br><span class="line">        <span class="comment">//将参数信息添加到方法中</span></span><br><span class="line">        StringEntity entity = <span class="keyword">new</span> StringEntity(param.toString(),<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        post.setEntity(entity);</span><br><span class="line">        <span class="comment">//设置cookies</span></span><br><span class="line">        TestConfig.defaultHttpClient.setCookieStore(TestConfig.store);</span><br><span class="line">        <span class="comment">//声明一个对象来进行响应结果的存储</span></span><br><span class="line">        String result;</span><br><span class="line">        <span class="comment">//执行post方法</span></span><br><span class="line">        HttpResponse response = TestConfig.defaultHttpClient.execute(post);</span><br><span class="line">        <span class="comment">//获取响应结果</span></span><br><span class="line">        result = EntityUtils.toString(response.getEntity(),<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        System.out.println(result);</span><br><span class="line">        <span class="keyword">return</span> Integer.parseInt(result);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="7-持续集成"><a href="#7-持续集成" class="headerlink" title="7 持续集成"></a>7 持续集成</h4><h5 id="7-1-Maven打包"><a href="#7-1-Maven打包" class="headerlink" title="7.1 Maven打包"></a>7.1 Maven打包</h5><p>使用Maven构建的项目均可以直接使用maven build完成项目的编译测试打包，无需额外配置；Maven是通过pom.xml来执行任务的，其中的build标签描述了如何来编译及打包项目，而具体的编译和打包工作是通过build中配置的 plugin 来完成。当然plugin配置不是必须的，默认情况下，Maven 会绑定以下几个插件来完成基本操作。<br><img src="http://typora-imagehosting.oss-cn-shanghai.aliyuncs.com/img/20180328145612540" alt="img"></p>
<p>测试代码打包：</p>
<ol>
<li><p>在pom文件中添加配置</p>
<p>测试文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-surefire-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">suiteXmlFiles</span>&gt;</span></span><br><span class="line">                    ./src/main/resources/testng.xml</span><br><span class="line">                <span class="tag">&lt;/<span class="name">suiteXmlFiles</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Springboot项目打包指定java编译版本和执行mainClass</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">encoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">encoding</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">compilerArguments</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">extdirs</span>&gt;</span>$&#123;project&#125;/lib<span class="tag">&lt;/<span class="name">extdirs</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">compilerArguments</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">mainClass</span>&gt;</span>com.xxx.XxxApplication<span class="tag">&lt;/<span class="name">mainClass</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">goal</span>&gt;</span>repackage<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>执行命令（<code>cd 模块名</code> →<code>mvn clean package</code> ）</p>
</li>
</ol>
<h5 id="7-2-Jenkins集成"><a href="#7-2-Jenkins集成" class="headerlink" title="7.2 Jenkins集成"></a>7.2 Jenkins集成</h5><p><strong>环境搭建</strong></p>
<p>安装配置步骤：</p>
<ol>
<li><p>在linux环境中，下载好maven和jdk，然后配置好环境变量；</p>
</li>
<li><p>使用<code>wget  http://mirrors.jenkins.io/war-stable/latest/jenkins.war</code>命令下载Jenkins；</p>
</li>
<li><p>使用 <code>java -jar jenkins.war -httpPort=8081</code>启动Jenkins （避免端口号冲突）；</p>
</li>
</ol>
<p><img src="http://typora-imagehosting.oss-cn-shanghai.aliyuncs.com/img/60c07a6100017a9519201080.jpg" alt="img"></p>
<p><strong>任务配置</strong></p>
<p>新建任务→源码管理（Git）→增加Jenkins（仓库地址，Git用户名密码）→</p>
<p>构建（Execute shell）</p>
<p>deploy</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br><span class="line">pid=$(ps x | grep &quot;启动的jar包&quot; | grep -v grep | awk &#x27;&#123;print $1&#125;&#x27;)</span><br><span class="line">if [ -n &quot;$pid&quot; ]; then</span><br><span class="line">kill -9 $pid</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">cd 开发项目目录</span><br><span class="line">mvn clean package</span><br><span class="line">cd target</span><br><span class="line">BUILD_ID=dontKillMe</span><br><span class="line">nohup -java -jar jar包</span><br></pre></td></tr></table></figure>

<p>test</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br><span class="line">cd 测试项目目录</span><br><span class="line">mvn clean package</span><br></pre></td></tr></table></figure>

<p>→构建后操作（Build other projects：deploy→test）</p>
<p>工作目录：<code>~/.jenkins/workspace/</code></p>
<p><strong>测试报告</strong></p>
<p>构建test（在线报告系统搭建）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br><span class="line">cd 测试项目目录</span><br><span class="line">mvn clean package</span><br><span class="line"></span><br><span class="line">result=$(curl -s Jenkins地址/job/test/lastBuild/buildNumber --user 用户名:密码)</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">下载并配置tomcat</span></span><br><span class="line">mkdir /apache目录/webapps/ROOT/$result/</span><br><span class="line">cp /root/.jenkins/workspace/test/Chapter12/test-output/index.html /apache目录/webapps/ROOT/$result/</span><br><span class="line"><span class="meta">#</span><span class="bash">浏览器访问apache服务器/任务执行id号/index.html</span></span><br></pre></td></tr></table></figure>

<h4 id="8-总结"><a href="#8-总结" class="headerlink" title="8 总结"></a>8 总结</h4><p><strong>项目推进方式</strong></p>
<p><img src="http://typora-imagehosting.oss-cn-shanghai.aliyuncs.com/img/605760f800017f6719201080.jpg" alt="img"></p>
<p>需求阶段：产品需求确认、接口协议/规范制定，接口参数确认</p>
<p>开发阶段：Mock平台开发（集成提前）、测试用例设计、测试框架搭建与代码开发、持续集成环境搭建</p>
<p>测试阶段</p>
<p><img src="http://typora-imagehosting.oss-cn-shanghai.aliyuncs.com/img/605760290001a5a519201080.jpg" alt="img"></p>
<p>上线回归</p>
<p><img src="http://typora-imagehosting.oss-cn-shanghai.aliyuncs.com/img/6057614400010a5c19201080.jpg" alt="img"></p>
<p><strong>接口自动化测试技术</strong></p>
<ul>
<li>逻辑层、持久层、展示层<ul>
<li>逻辑控制层：TestNg、HTTPClient</li>
<li>持久层：MyBatis/Mysql、logBack/Log4J/FileLog</li>
<li>展示层：ExtentReport/HtmIReport</li>
</ul>
</li>
<li>Git代码管理</li>
<li>Jenkins持续集成</li>
<li>Mock平台</li>
</ul>
<p><strong>接口自动化测试收益</strong></p>
<ul>
<li>项目流程由串行变为<strong>并行</strong></li>
<li>测试工作由”重后期“变为”<strong>重前期</strong>“</li>
<li>测试执行<strong>时间缩短</strong>若干倍</li>
<li>测试数据可不断积累，<strong>降低漏测率</strong></li>
<li>测试<strong>报告可管理</strong>、可追溯、可查询</li>
<li>Mock平台可将<strong>集成环节提前</strong>，降低集成成本</li>
</ul>

        </div>

        
            <div class="article-nav">
                
                    <div class="article-prev">
                        <a class="prev btn"
                           rel="prev"
                           href="/2022/05/03/%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95%E5%85%A5%E9%97%A8/"
                        >
                            <i class="fa fa-chevron-left"></i>
                            <span class="post-nav-title-item">软件测试入门</span>
                            <span class="post-nav-item">上一篇</span>
                        </a>
                    </div>
                
                
                    <div class="article-next">
                        <a class="next btn"
                           rel="next"
                           href="/2021/05/22/Jmeter%E6%8E%A5%E5%8F%A3%E6%B5%8B%E8%AF%95%E5%85%A5%E9%97%A8/"
                        >
                            <span class="post-nav-title-item">Jmeter接口测试入门</span>
                            <span class="post-nav-item">下一篇</span>
                            <i class="fa fa-chevron-right"></i>
                        </a>
                    </div>
                
            </div>
        

        
    </div>
</div>


                    

                </main>

            </div>

            <div class="page-main-content-bottom">
                <footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy; 2022 <i class="fa fa-heart-o"></i> <a href="/">Homgun</a>
        </div>
        
        <div class="theme-info info-item">
            由 <a target="_blank" href="https://hexo.io">Hexo</a> 驱动 | 主题 <a
                    href="https://github.com/XPoet/hexo-theme-ils" target="_blank">ILS v2.1.0</a>
        </div>
    </div>
</footer>

            </div>
        </div>
    </main>

    <div class="sidebar-tools">
        <div class="tools-container">
    <ul class="tools-list">
        
            <li class="search popup-trigger">
                <i class="fa fa-search"></i>
            </li>
        

        

        <!-- TOC aside toggle -->
        
            <li class="tools-item page-aside-toggle">
                <i class="fa fa-outdent"></i>
            </li>
        

    </ul>
</div>

    </div>

    <div class="sidebar-tools-2">
        <div class="tools2-container">

    <button class="tools-button">
        <i class="fa fa-plus"></i>
    </button>

    <ul class="tools-wrapper">
        <!-- back2top -->
        
            <li class="tools-item scroll-to-bottom">
                <i class="fa fa-arrow-down"></i>
            </li>
            <li class="tools-item scroll-to-top">
                <i class="fa fa-arrow-up"></i>
            </li>
        

        <!-- mode toggle -->
        <li class="tools-item mode-toggle">
            <i class="fa fa-moon-o"></i>
        </li>

        <!-- rss -->
        


    </ul>
</div>

    </div>


    <!-- page aside -->
    <aside class="page-aside">
        
            <div class="post-toc-wrap">
    <div class="post-toc">
        <ol class="nav"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="nav-text">1 基本概念</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-Git"><span class="nav-text">2 Git</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#2-1-%E5%AE%89%E8%A3%85%E5%8F%8A%E9%85%8D%E7%BD%AE"><span class="nav-text">2.1 安装及配置</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-2-%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="nav-text">2.2 基本操作</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-3-%E5%88%86%E6%94%AF%E6%93%8D%E4%BD%9C"><span class="nav-text">2.3 分支操作</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-TestNG"><span class="nav-text">3 TestNG</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#3-1-%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3"><span class="nav-text">3.1 常用注解</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#Test"><span class="nav-text">@Test</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-2-%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A"><span class="nav-text">3.2 测试报告</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-Mock"><span class="nav-text">4 Mock</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-HttpClient"><span class="nav-text">5 HttpClient</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-SpringBoot%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98"><span class="nav-text">6 SpringBoot项目实战</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#6-1-Swagger"><span class="nav-text">6.1 Swagger</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#6-2-MyBatis"><span class="nav-text">6.2 MyBatis</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#6-3-%E7%94%A8%E4%BE%8B%E7%AE%A1%E7%90%86"><span class="nav-text">6.3 用例管理</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#6-4-%E6%95%B0%E6%8D%AE%E6%A0%A1%E9%AA%8C"><span class="nav-text">6.4 数据校验</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90"><span class="nav-text">7 持续集成</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#7-1-Maven%E6%89%93%E5%8C%85"><span class="nav-text">7.1 Maven打包</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#7-2-Jenkins%E9%9B%86%E6%88%90"><span class="nav-text">7.2 Jenkins集成</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-%E6%80%BB%E7%BB%93"><span class="nav-text">8 总结</span></a></li></ol>
    </div>
</div>
        
    </aside>

</div>



    <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-icon">
            <i class="fa fa-search"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="搜索..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fa fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>



<script src="/js/utils.js"></script>
<script src="/js/header-shrink.js"></script>
<script src="/js/dark-light-toggle.js"></script>
<script src="/js/main.js"></script>



    
<script src="/js/local-search.js"></script>




    
<script src="/js/back2top.js"></script>





    
<script src="/js/left-side-toggle.js"></script>


    
        
<script src="/js/code-copy.js"></script>

    

    
        
<script src="/lib/anime.min.js"></script>
<script src="/js/toc.js"></script>

    


</body>
</html>